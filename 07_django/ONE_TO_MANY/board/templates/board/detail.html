{% extends 'base.html' %}

{% block content %}

<h1>{{ article.title }} ({{ article.comment_set.count }})</h1>

<p>{{ article.content }}</p>

<div>
    <button>수정</button>
    <button>삭제</button>
</div>

{% comment %} 댓글 입력창 {% endcomment %}
<form action="{% url 'board:create_comment' article.pk %}" method="POST">
    {% csrf_token %}
    {{ form }}
    <button>제출!</button>
</form>

{% comment %} 댓글 목록 조회 (댓글 삭제) {% endcomment %}
{% comment %} 댓글 목록을 조회하니까 for문을 써야 한다. {% endcomment %}
<ul>
    {% for comment  in article.comment_set.all %}
        {% comment %} comment.content 는 content에 있는 값을 삭제하는 것임 {% endcomment %}
        <li>{{ comment.content }}</li>
        {% comment %} 데이터베이스에 영향을 주니까 POST방식으로 한다 {% endcomment %}
            <form action="{% url 'board:delete_comment' article.pk comment.pk %}" method="POST" style="display:inline-block;">
                {% csrf_token %}
                <button>x</button>
            </form>
    {% endfor %}
</ul>

{% endblock content %}